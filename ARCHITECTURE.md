# Mini-PNPM æ¶æ„è¯´æ˜

## é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ core/                 # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ package.ts       # Package ç±» - è¡¨ç¤ºå•ä¸ªåŒ…
â”‚   â”œâ”€â”€ registry.ts      # Registry ç±» - ä¸ npm ä»“åº“äº¤äº’
â”‚   â”œâ”€â”€ store.ts         # Store ç±» - ä¸­å¿ƒåŒ–å­˜å‚¨ç®¡ç†
â”‚   â”œâ”€â”€ linker.ts        # Linker ç±» - ç¬¦å·é“¾æ¥ç®¡ç†
â”‚   â””â”€â”€ index.ts         # æ ¸å¿ƒæ¨¡å—å¯¼å‡º
â”œâ”€â”€ cli/                 # å‘½ä»¤è¡Œæ¥å£
â”‚   â”œâ”€â”€ commands/        # å„ç§å‘½ä»¤å®ç°
â”‚   â”‚   â”œâ”€â”€ install.ts   # install å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ add.ts       # add å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ remove.ts    # remove å‘½ä»¤
â”‚   â”‚   â”œâ”€â”€ list.ts      # list å‘½ä»¤
â”‚   â”‚   â””â”€â”€ index.ts     # å‘½ä»¤å¯¼å‡º
â”‚   â””â”€â”€ index.ts         # CLI å…¥å£
â”œâ”€â”€ types/               # TypeScript ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ index.ts         # æ‰€æœ‰ç±»å‹å®šä¹‰
â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
    â”œâ”€â”€ hash.ts          # å“ˆå¸Œè®¡ç®—å·¥å…·
    â”œâ”€â”€ download.ts      # ä¸‹è½½å·¥å…·
    â”œâ”€â”€ fs.ts            # æ–‡ä»¶ç³»ç»Ÿå·¥å…·
    â””â”€â”€ index.ts         # å·¥å…·å¯¼å‡º
```

## æ ¸å¿ƒæ¦‚å¿µ

### 1. Package ç±»
- è¡¨ç¤ºå•ä¸ª npm åŒ…
- åŒ…å«åŒ…çš„åŸºæœ¬ä¿¡æ¯ã€ä¾èµ–å…³ç³»
- æä¾›åŒ…çš„å”¯ä¸€æ ‡è¯†ç¬¦å’Œå“ˆå¸Œå€¼è®¡ç®—

### 2. Registry ç±»
- å¤„ç†ä¸ npm registry çš„äº¤äº’
- è·å–åŒ…ä¿¡æ¯ã€è§£æç‰ˆæœ¬èŒƒå›´
- ä¸‹è½½åŒ…çš„ tarball

### 3. Store ç±»
- ç®¡ç† pnpm çš„ä¸­å¿ƒåŒ–å­˜å‚¨
- å®ç°åŒ…çš„å»é‡å’Œç¼“å­˜
- å­˜å‚¨åœ¨ `~/.mini-pnpm-store` ç›®å½•

### 4. Linker ç±»
- å¤„ç†ç¬¦å·é“¾æ¥å’Œç¡¬é“¾æ¥
- åˆ›å»º node_modules ç»“æ„
- å®ç° pnpm çš„æ ¸å¿ƒé“¾æ¥æœºåˆ¶

## å·²å®ç°åŠŸèƒ½

### âœ… åŸºç¡€æ¶æ„
- [x] é¡¹ç›®ç»“æ„æ­å»º
- [x] TypeScript é…ç½®
- [x] æ ¸å¿ƒç±»å®šä¹‰
- [x] CLI æ¡†æ¶

### âœ… å‘½ä»¤è¡Œå·¥å…·
- [x] `mini-pnpm list` - åˆ—å‡ºå·²å®‰è£…çš„åŒ…
- [x] `mini-pnpm add <package>` - æ·»åŠ æ–°ä¾èµ–
- [x] `mini-pnpm remove <package>` - ç§»é™¤ä¾èµ–
- [x] `mini-pnpm install` - å®‰è£…ä¾èµ–ï¼ˆåŸºç¡€æ¡†æ¶ï¼‰

### âœ… Registry äº¤äº’
- [x] è·å–åŒ…ä¿¡æ¯
- [x] ç‰ˆæœ¬è§£æï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰
- [x] åŒ…éªŒè¯

## å¾…å®ç°åŠŸèƒ½

### ğŸš§ æ ¸å¿ƒåŠŸèƒ½
- [ ] å®Œæ•´çš„ semver ç‰ˆæœ¬è§£æ
- [ ] åŒ…ä¸‹è½½å’Œè§£å‹
- [ ] Store å­˜å‚¨å®ç°
- [ ] ç¬¦å·é“¾æ¥åˆ›å»º
- [ ] ä¾èµ–æ ‘è§£æ
- [ ] é”æ–‡ä»¶ç”Ÿæˆ

### ğŸš§ é«˜çº§åŠŸèƒ½
- [ ] ä¾èµ–å†²çªè§£å†³
- [ ] Peer dependencies å¤„ç†
- [ ] ç¼“å­˜ä¼˜åŒ–
- [ ] å¹¶å‘ä¸‹è½½
- [ ] å®Œæ•´æ€§æ ¡éªŒ

## ä½¿ç”¨ç¤ºä¾‹

```bash
# æ„å»ºé¡¹ç›®
pnpm build

# åœ¨æµ‹è¯•é¡¹ç›®ä¸­ä½¿ç”¨
cd test-project

# åˆ—å‡ºä¾èµ–
../dist/cli/index.js list

# æ·»åŠ ä¾èµ–
../dist/cli/index.js add lodash

# ç§»é™¤ä¾èµ–
../dist/cli/index.js remove lodash

# å®‰è£…ä¾èµ–ï¼ˆç›®å‰åªæ˜¯è§£æï¼‰
../dist/cli/index.js install
```

## å­¦ä¹ è¦ç‚¹

1. **åŒ…ç®¡ç†å™¨çš„æ ¸å¿ƒæ¦‚å¿µ**ï¼šç†è§£åŒ…ã€ä¾èµ–ã€ç‰ˆæœ¬ç®¡ç†
2. **ä¸­å¿ƒåŒ–å­˜å‚¨**ï¼špnpm çš„æ ¸å¿ƒä¼˜åŠ¿ï¼Œé¿å…é‡å¤å­˜å‚¨
3. **ç¬¦å·é“¾æ¥**ï¼šå®ç°é«˜æ•ˆçš„ node_modules ç»“æ„
4. **ä¾èµ–è§£æ**ï¼šå¤„ç†å¤æ‚çš„ä¾èµ–å…³ç³»
5. **CLI è®¾è®¡**ï¼šç”¨æˆ·å‹å¥½çš„å‘½ä»¤è¡Œæ¥å£

## ä¸‹ä¸€æ­¥å¼€å‘å»ºè®®

1. å…ˆå®ç°åŒ…ä¸‹è½½åŠŸèƒ½
2. ç„¶åå®ç° Store å­˜å‚¨é€»è¾‘
3. æ¥ç€å®ç°ç¬¦å·é“¾æ¥åˆ›å»º
4. æœ€åå®Œå–„ä¾èµ–è§£æç®—æ³•

è¿™ä¸ªæ¶æ„ä¸ºä½ æä¾›äº†ä¸€ä¸ªå®Œæ•´çš„å­¦ä¹ æ¡†æ¶ï¼Œä½ å¯ä»¥é€æ­¥å®ç°å„ä¸ªåŠŸèƒ½æ¨¡å—ï¼ 